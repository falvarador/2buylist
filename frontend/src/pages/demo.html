<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>ShoppingApp Pro | Vue 3 & Vanilla CSS</title>
	
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
	
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
	
	<style>
		/* Variables y Reset */
		:root {
			--brand: #22c55e;
			--brand-dark: #16a34a;
			--bg-main: #f1f5f9;
			--bg-card: #ffffff;
			--bg-sidebar: #ffffff;
			--text-main: #0f172a;
			--text-muted: #64748b;
			--border: #e2e8f0;
			--radius: 12px;
			--radius-lg: 24px;
		}
		
		.dark {
			--bg-main: #0f172a;
			--bg-card: #1e2937;
			--bg-sidebar: #111827;
			--text-main: #f8fafc;
			--text-muted: #94a3b8;
			--border: #334155;
		}
		
		body {
			margin: 0;
			font-family: 'Inter', sans-serif;
			background-color: var(--bg-main);
			color: var(--text-main);
			transition: background-color 0.3s ease;
		}
		
		/* Layout */
		.app-container {
			display: flex;
			height: 100vh;
			overflow: hidden;
		}
		
		/* Sidebar Component */
		.sidebar {
			width: 320px;
			background: var(--bg-sidebar);
			border-right: 1px solid var(--border);
			display: flex;
			flex-direction: column;
		}
		
		.sidebar-header {
			padding: 24px;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		
		.list-item {
			padding: 12px 20px;
			margin: 4px 16px;
			border-radius: var(--radius);
			cursor: pointer;
			display: flex;
			align-items: center;
			transition: var(--transition);
			border-left: 4px solid transparent;
		}
		
		.list-item.active {
			background: rgba(34, 197, 94, 0.1);
			border-left-color: var(--brand);
		}
		
		/* Main Content */
		.main-content {
			flex: 1;
			padding: 40px;
			overflow-y: auto;
		}
		
		.card {
			background: var(--bg-card);
			border-radius: var(--radius-lg);
			border: 1px solid var(--border);
			padding: 24px;
			box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
		}
		
		/* Inputs & Buttons */
		.btn-primary {
			background: var(--brand);
			color: white;
			border: none;
			padding: 12px 24px;
			border-radius: var(--radius);
			font-weight: 600;
			cursor: pointer;
			transition: transform 0.1s;
		}
		
		.btn-primary:active {
			transform: scale(0.98);
		}
		
		.input-group {
			display: flex;
			gap: 12px;
			margin-bottom: 20px;
			padding: 12px;
			background: var(--bg-main);
			border-radius: var(--radius);
		}
		
		.input-group input {
			flex: 1;
			background: transparent;
			border: none;
			color: var(--text-main);
			outline: none;
		}
		
		/* Modal Custom Styling */
		.modal-overlay {
			position: fixed;
			inset: 0;
			background: rgba(0, 0, 0, 0.5);
			backdrop-filter: blur(4px);
			display: flex;
			align-items: center;
			justify-content: center;
			z-index: 1000;
		}
	</style>
</head>
<body>

<div :class="{ 'dark': darkMode }" id="app">
	<div class="app-container">
		
		<aside class="sidebar">
			<div class="sidebar-header">
				<h2>Mis Listas</h2>
				<button @click="toggleDarkMode" class="btn-icon">
					<i :class="darkMode ? 'fas fa-sun' : 'fas fa-moon'"></i>
				</button>
			</div>
			
			<nav id="sidebar-lists" style="flex: 1">
				<div :class="['list-item', { active: currentListIndex === index }]"
					 :key="list.id"
					 @click="currentListIndex = index"
					 v-for="(list, index) in lists">
					<i :class="list.icon" style="margin-right: 15px"></i>
					<div>
						<div style="font-weight: 600">{{ list.name }}</div>
						<small style="color: var(--text-muted)">{{ list.items.length }} items</small>
					</div>
				</div>
			</nav>
			
			<div style="padding: 24px">
				<button @click="showModal = true" class="btn-primary" style="width: 100%">+ Nueva Lista</button>
			</div>
		</aside>
		
		<main class="main-content">
			<header style="margin-bottom: 40px">
				<h1 style="font-size: 2.5rem; margin: 0">{{ currentList.name }}</h1>
				<p style="color: var(--brand); font-weight: 600">{{ pendingCount }} pendientes</p>
			</header>
			
			<div class="card">
				<div class="input-group">
					<input @keyup.enter="addItem" placeholder="Añadir artículo..." type="text" v-model="newItem">
				</div>
				
				<div class="todo-list">
					<div :key="item.id"
						 style="display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid var(--border)"
						 v-for="(item, index) in currentList.items">
						<input type="checkbox" v-model="item.completed">
						<span :style="{ flex: 1, marginLeft: '15px', textDecoration: item.completed ? 'line-through' : 'none' }">
                            {{ item.text }}
                        </span>
						<button @click="removeItem(index)"
								style="background:none; border:none; color: var(--text-muted); cursor:pointer">
							<i class="fas fa-trash"></i>
						</button>
					</div>
				</div>
			</div>
		</main>
	</div>
	
	<div class="modal-overlay" v-if="showModal">
		<div class="card" style="width: 400px">
			<h3>Nueva Lista</h3>
			<input placeholder="Nombre de la lista" style="width: 100%; padding: 10px; margin-bottom: 20px" type="text"
				   v-model="newList.name">
			<div style="display: flex; gap: 10px">
				<button @click="showModal = false" style="flex:1">Cancelar</button>
				<button @click="createList" class="btn-primary" style="flex:1">Crear</button>
			</div>
		</div>
	</div>
</div>

<script>
	const { createApp, ref, computed, onMounted } = Vue
	
	createApp({
		setup () {
			const darkMode = ref(localStorage.getItem('theme') === 'dark')
			const showModal = ref(false)
			const currentListIndex = ref(0)
			const newItem = ref('')
			const newList = ref({ name: '', icon: 'fa-shopping-cart' })
			
			const lists = ref([
				{
					id: '1',
					name: 'Supermercado',
					icon: 'fa-shopping-cart',
					items: [{ id: 101, text: 'Leche', completed: false }]
				},
				{ id: '2', name: 'Trabajo', icon: 'fa-briefcase', items: [] }
			])
			
			const currentList = computed(() => lists.value[currentListIndex.value])
			const pendingCount = computed(() => currentList.value.items.filter(i => !i.completed).length)
			
			const toggleDarkMode = () => {
				darkMode.value = !darkMode.value
				localStorage.setItem('theme', darkMode.value ? 'dark' : 'light')
			}
			
			const addItem = () => {
				if (!newItem.value.trim()) return
				currentList.value.items.unshift({ id: Date.now(), text: newItem.value, completed: false })
				newItem.value = ''
			}
			
			const removeItem = (index) => currentList.value.items.splice(index, 1)
			
			const createList = () => {
				if (!newList.value.name.trim()) return
				lists.value.push({ ...newList.value, id: Date.now().toString(), items: [] })
				showModal.value = false
				newList.value = { name: '', icon: 'fa-shopping-cart' }
			}
			
			onMounted(() => {
				const el = document.getElementById('sidebar-lists')
				Sortable.create(el, {
					animation: 150,
					onEnd: (evt) => {
						const moved = lists.value.splice(evt.oldIndex, 1)[0]
						lists.value.splice(evt.newIndex, 0, moved)
					}
				})
			})
			
			return {
				darkMode, showModal, currentListIndex, lists, currentList,
				newItem, newList, pendingCount, toggleDarkMode, addItem, removeItem, createList
			}
		}
	}).mount('#app')
</script>
</body>
</html>